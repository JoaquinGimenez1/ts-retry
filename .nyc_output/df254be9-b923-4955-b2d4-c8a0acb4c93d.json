{"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\index.ts":{"path":"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":191}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":138}},"4":{"start":{"line":5,"column":95},"end":{"line":5,"column":132}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":106}},"6":{"start":{"line":6,"column":79},"end":{"line":6,"column":100}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":116}},"8":{"start":{"line":7,"column":84},"end":{"line":7,"column":110}},"9":{"start":{"line":8,"column":0},"end":{"line":8,"column":138}},"10":{"start":{"line":8,"column":95},"end":{"line":8,"column":132}},"11":{"start":{"line":9,"column":13},"end":{"line":9,"column":30}},"12":{"start":{"line":10,"column":0},"end":{"line":10,"column":119}},"13":{"start":{"line":10,"column":86},"end":{"line":10,"column":113}},"14":{"start":{"line":11,"column":0},"end":{"line":11,"column":103}},"15":{"start":{"line":11,"column":78},"end":{"line":11,"column":97}},"16":{"start":{"line":12,"column":0},"end":{"line":12,"column":113}},"17":{"start":{"line":12,"column":83},"end":{"line":12,"column":107}},"18":{"start":{"line":13,"column":0},"end":{"line":13,"column":123}},"19":{"start":{"line":13,"column":88},"end":{"line":13,"column":117}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":81},"end":{"line":5,"column":82}},"loc":{"start":{"line":5,"column":93},"end":{"line":5,"column":134}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":65},"end":{"line":6,"column":66}},"loc":{"start":{"line":6,"column":77},"end":{"line":6,"column":102}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":7,"column":70},"end":{"line":7,"column":71}},"loc":{"start":{"line":7,"column":82},"end":{"line":7,"column":112}},"line":7},"3":{"name":"(anonymous_3)","decl":{"start":{"line":8,"column":81},"end":{"line":8,"column":82}},"loc":{"start":{"line":8,"column":93},"end":{"line":8,"column":134}},"line":8},"4":{"name":"(anonymous_4)","decl":{"start":{"line":10,"column":72},"end":{"line":10,"column":73}},"loc":{"start":{"line":10,"column":84},"end":{"line":10,"column":115}},"line":10},"5":{"name":"(anonymous_5)","decl":{"start":{"line":11,"column":64},"end":{"line":11,"column":65}},"loc":{"start":{"line":11,"column":76},"end":{"line":11,"column":99}},"line":11},"6":{"name":"(anonymous_6)","decl":{"start":{"line":12,"column":69},"end":{"line":12,"column":70}},"loc":{"start":{"line":12,"column":81},"end":{"line":12,"column":109}},"line":12},"7":{"name":"(anonymous_7)","decl":{"start":{"line":13,"column":74},"end":{"line":13,"column":75}},"loc":{"start":{"line":13,"column":86},"end":{"line":13,"column":119}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":1,"8":0,"9":1,"10":4,"11":1,"12":1,"13":0,"14":1,"15":0,"16":1,"17":4,"18":1,"19":0},"f":{"0":1,"1":4,"2":0,"3":4,"4":0,"5":0,"6":4,"7":0},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Utilisateur/Documents/dev/ts-retry/src/index.ts","sources":["C:/Users/Utilisateur/Documents/dev/ts-retry/src/index.ts"],"names":[],"mappings":";;;AACA,iCAKiB;AAJf,8GAAA,qBAAqB,OAAA;AACrB,8FAAA,KAAK,OAAA;AACL,mGAAA,UAAU,OAAA;AACV,8GAAA,qBAAqB,OAAA;AAGvB,+BAAuE;AAA9D,oGAAA,YAAY,OAAA;AAAE,4FAAA,IAAI,OAAA;AAAE,iGAAA,SAAS,OAAA;AAAE,sGAAA,cAAc,OAAA","sourcesContent":["export type { RetryOptions } from \"./retry\";\nexport {\n  getDefaulRetryOptions,\n  retry,\n  retryAsync,\n  setDefaulRetryOptions,\n} from \"./retry\";\n\nexport { TimeoutError, wait, waitUntil, waitUntilAsync } from \"./wait\";\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fc9b475ac68941ace57d9193186c079022ed1734","contentHash":"9e03742cbb15b69ac6c85c9ec0e0103491375451cda1b38571a664cae25a6a96"},"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\retry.ts":{"path":"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\retry.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":108}},"14":{"start":{"line":13,"column":15},"end":{"line":13,"column":32}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":32}},"16":{"start":{"line":16,"column":4},"end":{"line":19,"column":7}},"17":{"start":{"line":17,"column":24},"end":{"line":17,"column":49}},"18":{"start":{"line":18,"column":8},"end":{"line":18,"column":49}},"19":{"start":{"line":21,"column":0},"end":{"line":21,"column":22}},"20":{"start":{"line":23,"column":4},"end":{"line":34,"column":7}},"21":{"start":{"line":24,"column":8},"end":{"line":33,"column":9}},"22":{"start":{"line":25,"column":12},"end":{"line":25,"column":30}},"23":{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},"24":{"start":{"line":29,"column":16},"end":{"line":29,"column":41}},"25":{"start":{"line":30,"column":16},"end":{"line":30,"column":75}},"26":{"start":{"line":32,"column":12},"end":{"line":32,"column":22}},"27":{"start":{"line":36,"column":0},"end":{"line":36,"column":32}},"28":{"start":{"line":37,"column":25},"end":{"line":40,"column":1}},"29":{"start":{"line":42,"column":4},"end":{"line":42,"column":92}},"30":{"start":{"line":43,"column":4},"end":{"line":43,"column":35}},"31":{"start":{"line":45,"column":0},"end":{"line":45,"column":54}},"32":{"start":{"line":47,"column":4},"end":{"line":47,"column":49}},"33":{"start":{"line":49,"column":0},"end":{"line":49,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"retry","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":14}},"loc":{"start":{"line":15,"column":33},"end":{"line":20,"column":1}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":43},"end":{"line":16,"column":44}},"loc":{"start":{"line":16,"column":56},"end":{"line":19,"column":5}},"line":16},"9":{"name":"retryAsync","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":19}},"loc":{"start":{"line":22,"column":64},"end":{"line":35,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":43},"end":{"line":23,"column":44}},"loc":{"start":{"line":23,"column":56},"end":{"line":34,"column":5}},"line":23},"11":{"name":"setDefaulRetryOptions","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":30}},"loc":{"start":{"line":41,"column":45},"end":{"line":44,"column":1}},"line":41},"12":{"name":"getDefaulRetryOptions","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":30}},"loc":{"start":{"line":46,"column":33},"end":{"line":48,"column":1}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":22,"column":24},"end":{"line":22,"column":62}},"type":"default-arg","locations":[{"start":{"line":22,"column":44},"end":{"line":22,"column":62}}],"line":22},"6":{"loc":{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},{"start":{"line":28,"column":12},"end":{"line":31,"column":13}}],"line":28}},"s":{"0":1,"1":334,"2":0,"3":118,"4":114,"5":114,"6":0,"7":220,"8":220,"9":110,"10":342,"11":118,"12":1,"13":1,"14":1,"15":1,"16":4,"17":4,"18":4,"19":1,"20":114,"21":114,"22":114,"23":112,"24":110,"25":110,"26":2,"27":1,"28":1,"29":4,"30":4,"31":1,"32":5,"33":1},"f":{"0":118,"1":334,"2":0,"3":118,"4":114,"5":220,"6":342,"7":4,"8":4,"9":114,"10":114,"11":4,"12":5},"b":{"0":[1,1,1],"1":[334,0],"2":[118,118],"3":[8,334],"4":[118,118],"5":[3],"6":[110,2]},"inputSourceMap":{"version":3,"file":"C:/Users/Utilisateur/Documents/dev/ts-retry/src/retry.ts","sources":["C:/Users/Utilisateur/Documents/dev/ts-retry/src/retry.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,iCAAwC;AACxC,iCAA8B;AAO9B,SAAsB,KAAK,CACzB,EAAW,EACX,YAA2B;;QAE3B,MAAM,OAAO,GAAG,qBAAc,CAAC,EAAE,CAAC,CAAC;QACnC,OAAO,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;IAC3C,CAAC;CAAA;AAND,sBAMC;AAED,SAAsB,UAAU,CAC9B,EAAoB,EACpB,EAAE,MAAM,EAAE,KAAK,KAAmB,kBAAkB;;QAEpD,IAAI;YACF,OAAO,MAAM,EAAE,EAAE,CAAC;SACnB;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,MAAM,GAAG,CAAC,EAAE;gBACd,MAAM,WAAI,CAAC,KAAK,CAAC,CAAC;gBAClB,OAAO,MAAM,UAAU,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;aAC5D;YACD,MAAM,GAAG,CAAC;SACX;IACH,CAAC;CAAA;AAbD,gCAaC;AAED,IAAI,kBAAkB,GAAiB;IACrC,KAAK,EAAE,GAAG;IACV,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,EAAE;CACrB,CAAC;AAEF,SAAgB,qBAAqB,CACnC,YAAmC;IAEnC,kBAAkB,mCAAQ,kBAAkB,GAAK,YAAY,CAAE,CAAC;IAChE,OAAO,qBAAqB,EAAE,CAAC;AACjC,CAAC;AALD,sDAKC;AAED,SAAgB,qBAAqB;IACnC,yBAAY,kBAAkB,EAAG;AACnC,CAAC;AAFD,sDAEC","sourcesContent":["import { asyncDecorator } from \"./misc\";\nimport { wait } from \"./wait\";\n\nexport interface RetryOptions {\n  maxTry: number;\n  delay: number;\n}\n\nexport async function retry<T>(\n  fn: () => T,\n  retryOptions?: RetryOptions,\n): Promise<T> {\n  const fnAsync = asyncDecorator(fn);\n  return retryAsync(fnAsync, retryOptions);\n}\n\nexport async function retryAsync<T>(\n  fn: () => Promise<T>,\n  { maxTry, delay }: RetryOptions = defaulRetryOptions,\n): Promise<T> {\n  try {\n    return await fn();\n  } catch (err) {\n    if (maxTry > 1) {\n      await wait(delay);\n      return await retryAsync(fn, { delay, maxTry: maxTry - 1 });\n    }\n    throw err;\n  }\n}\n\nlet defaulRetryOptions: RetryOptions = {\n  delay: 250,\n  maxTry: 250 * 4 * 60,\n};\n\nexport function setDefaulRetryOptions(\n  retryOptions: Partial<RetryOptions>,\n): RetryOptions {\n  defaulRetryOptions = { ...defaulRetryOptions, ...retryOptions };\n  return getDefaulRetryOptions();\n}\n\nexport function getDefaulRetryOptions(): Readonly<RetryOptions> {\n  return { ...defaulRetryOptions };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a24ff13e88ca7c434434caa903857d0c844720ad","contentHash":"b3e24a530b8e9a0d2b21601b6655d6cbb24d9644c6532ae202b82d5c3fab008d"},"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\misc.ts":{"path":"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\misc.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":23},"end":{"line":11,"column":2}},"3":{"start":{"line":4,"column":31},"end":{"line":11,"column":2}},"4":{"start":{"line":4,"column":37},"end":{"line":11,"column":2}},"5":{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},"6":{"start":{"line":6,"column":8},"end":{"line":6,"column":22}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":20}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":23},"end":{"line":4,"column":24}},"loc":{"start":{"line":4,"column":31},"end":{"line":11,"column":2}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":31},"end":{"line":4,"column":32}},"loc":{"start":{"line":4,"column":37},"end":{"line":11,"column":2}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":4,"column":49},"end":{"line":4,"column":50}},"loc":{"start":{"line":4,"column":70},"end":{"line":11,"column":1}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":8,"4":118,"5":118,"6":118,"7":113,"8":1},"f":{"0":8,"1":118,"2":118},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Utilisateur/Documents/dev/ts-retry/src/misc.ts","sources":["C:/Users/Utilisateur/Documents/dev/ts-retry/src/misc.ts"],"names":[],"mappings":";;;AAAO,MAAM,cAAc,GAAG,CAAI,EAAW,EAAE,EAAE,CAC/C,GAAG,EAAE,CACH,IAAI,OAAO,CAAI,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;IACjC,IAAI;QACF,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;KACf;IAAC,OAAO,GAAG,EAAE;QACZ,MAAM,CAAC,GAAG,CAAC,CAAC;KACb;AACH,CAAC,CAAC,CAAC;AARM,QAAA,cAAc,kBAQpB","sourcesContent":["export const asyncDecorator = <T>(fn: () => T) =>\n  () =>\n    new Promise<T>((resolve, reject) => {\n      try {\n        resolve(fn());\n      } catch (err) {\n        reject(err);\n      }\n    });\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"225f358b8b32813eb671cc004f4a19e0e3894a06","contentHash":"3a081d55d339c12444c83d92ce8eac827b6be78c050056b2c5e6e2e707a7d137"},"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\wait.ts":{"path":"C:\\Users\\Utilisateur\\Documents\\dev\\ts-retry\\src\\wait.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":90}},"14":{"start":{"line":13,"column":15},"end":{"line":13,"column":32}},"15":{"start":{"line":15,"column":4},"end":{"line":15,"column":67}},"16":{"start":{"line":15,"column":36},"end":{"line":15,"column":65}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":20}},"18":{"start":{"line":19,"column":4},"end":{"line":22,"column":7}},"19":{"start":{"line":20,"column":24},"end":{"line":20,"column":49}},"20":{"start":{"line":21,"column":8},"end":{"line":21,"column":59}},"21":{"start":{"line":24,"column":0},"end":{"line":24,"column":30}},"22":{"start":{"line":26,"column":4},"end":{"line":40,"column":7}},"23":{"start":{"line":27,"column":23},"end":{"line":27,"column":46}},"24":{"start":{"line":28,"column":24},"end":{"line":31,"column":10}},"25":{"start":{"line":28,"column":30},"end":{"line":31,"column":10}},"26":{"start":{"line":29,"column":12},"end":{"line":29,"column":30}},"27":{"start":{"line":30,"column":12},"end":{"line":30,"column":26}},"28":{"start":{"line":32,"column":23},"end":{"line":35,"column":10}},"29":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"30":{"start":{"line":37,"column":12},"end":{"line":37,"column":24}},"31":{"start":{"line":39,"column":8},"end":{"line":39,"column":22}},"32":{"start":{"line":42,"column":0},"end":{"line":42,"column":40}},"33":{"start":{"line":45,"column":8},"end":{"line":45,"column":28}},"34":{"start":{"line":46,"column":8},"end":{"line":46,"column":30}},"35":{"start":{"line":49,"column":0},"end":{"line":49,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"wait","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":13}},"loc":{"start":{"line":14,"column":24},"end":{"line":16,"column":1}},"line":14},"8":{"name":"(anonymous_8)","decl":{"start":{"line":15,"column":23},"end":{"line":15,"column":24}},"loc":{"start":{"line":15,"column":36},"end":{"line":15,"column":65}},"line":15},"9":{"name":"waitUntil","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":18}},"loc":{"start":{"line":18,"column":37},"end":{"line":23,"column":1}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":19,"column":43},"end":{"line":19,"column":44}},"loc":{"start":{"line":19,"column":56},"end":{"line":22,"column":5}},"line":19},"11":{"name":"waitUntilAsync","decl":{"start":{"line":25,"column":9},"end":{"line":25,"column":23}},"loc":{"start":{"line":25,"column":110},"end":{"line":41,"column":1}},"line":25},"12":{"name":"(anonymous_12)","decl":{"start":{"line":26,"column":43},"end":{"line":26,"column":44}},"loc":{"start":{"line":26,"column":56},"end":{"line":40,"column":5}},"line":26},"13":{"name":"(anonymous_13)","decl":{"start":{"line":28,"column":24},"end":{"line":28,"column":25}},"loc":{"start":{"line":28,"column":30},"end":{"line":31,"column":10}},"line":28},"14":{"name":"(anonymous_14)","decl":{"start":{"line":28,"column":62},"end":{"line":28,"column":63}},"loc":{"start":{"line":28,"column":75},"end":{"line":31,"column":9}},"line":28},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":18},"end":{"line":47,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":25,"column":35},"end":{"line":25,"column":108}},"type":"default-arg","locations":[{"start":{"line":25,"column":43},"end":{"line":25,"column":108}}],"line":25},"6":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36}},"s":{"0":1,"1":12,"2":0,"3":12,"4":8,"5":8,"6":2,"7":4,"8":4,"9":4,"10":18,"11":12,"12":1,"13":1,"14":1,"15":114,"16":114,"17":1,"18":4,"19":4,"20":4,"21":1,"22":4,"23":4,"24":4,"25":4,"26":4,"27":4,"28":4,"29":3,"30":2,"31":1,"32":1,"33":3,"34":3,"35":1},"f":{"0":12,"1":12,"2":0,"3":12,"4":8,"5":4,"6":18,"7":114,"8":114,"9":4,"10":4,"11":4,"12":4,"13":4,"14":4,"15":3},"b":{"0":[1,1,1],"1":[12,0],"2":[12,12],"3":[6,12],"4":[12,12],"5":[3],"6":[2,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Utilisateur/Documents/dev/ts-retry/src/wait.ts","sources":["C:/Users/Utilisateur/Documents/dev/ts-retry/src/wait.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,iCAAwC;AAExC,SAAgB,IAAI,CAAC,QAAgB;IACnC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC;AACjE,CAAC;AAFD,oBAEC;AAED,SAAsB,SAAS,CAC7B,EAAW,EACX,KAAa,EACb,KAAa;;QAEb,MAAM,OAAO,GAAG,qBAAc,CAAC,EAAE,CAAC,CAAC;QACnC,OAAO,MAAM,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IACrD,CAAC;CAAA;AAPD,8BAOC;AAED,SAAsB,cAAc,CAClC,EAAoB,EACpB,KAAa,EACb,QAAe,IAAI,YAAY,CAC7B,+CAA+C,CAChD;;QAED,MAAM,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;QACvC,MAAM,OAAO,GAAG,GAAS,EAAE;YACzB,MAAM,IAAI,CAAC,KAAK,CAAC,CAAC;YAClB,OAAO,MAAM,CAAC;QAChB,CAAC,CAAA,CAAC;QACF,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC;YAChC,EAAE,EAAE;YACJ,OAAO,EAAE;SACV,CAAC,CAAC;QACH,IAAI,MAAM,KAAK,MAAM,EAAE;YACrB,MAAM,KAAK,CAAC;SACb;QACD,OAAO,MAAW,CAAC;IACrB,CAAC;CAAA;AApBD,wCAoBC;AAED,MAAa,YAAa,SAAQ,KAAK;IAAvC;;QACE,cAAS,GAAG,IAAI,CAAC;IACnB,CAAC;CAAA;AAFD,oCAEC","sourcesContent":["import { asyncDecorator } from \"./misc\";\n\nexport function wait(duration: number) {\n  return new Promise((resolve) => setTimeout(resolve, duration));\n}\n\nexport async function waitUntil<T>(\n  fn: () => T,\n  delay: number,\n  error?: Error,\n): Promise<T> {\n  const fnAsync = asyncDecorator(fn);\n  return await waitUntilAsync(fnAsync, delay, error);\n}\n\nexport async function waitUntilAsync<T>(\n  fn: () => Promise<T>,\n  delay: number,\n  error: Error = new TimeoutError(\n    \"function did not complete within allowed time\",\n  ),\n): Promise<T> {\n  const canary = Symbol(\"DELAY_EXPIRED\");\n  const timeout = async () => {\n    await wait(delay);\n    return canary;\n  };\n  const result = await Promise.race([\n    fn(),\n    timeout(),\n  ]);\n  if (result === canary) {\n    throw error;\n  }\n  return result as T;\n}\n\nexport class TimeoutError extends Error {\n  isTimeout = true;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a837c4c65be80f4158116ecd080edf8ff623a984","contentHash":"eb3057d544bced1a884db905e33bd8994b531ec76054361db5945b96beb11593"}}